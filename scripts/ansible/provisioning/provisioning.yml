---
- name: Configure new hosts
  hosts: test
  become: true
  become_user: root
  vars_files:
    - users.yml
  tasks:
    - name: Setup users
      ansible.builtin.include_role:
        name: role_users

    - name: Setup bash profile
      ansible.builtin.include_role:
        name: role_bash

    - name: Configure ssh service
      ansible.builtin.include_role:
        name: role_ssh
      when: role_ssh_skip_task is undefined

    - name: Setup wireguard
      ansible.builtin.include_role:
        name: role_wireguard

    - name: Configure logs
      ansible.builtin.include_role:
        name: role_rsyslog

#
#    - name: Configure backup scripts
#
#    - name: Update host
#
    - name: Install docker service
      ansible.builtin.include_role:
        name: role_docker
#
#    - name: Start services
# - name: Cleanup
# usuniÄ™cie inituser
